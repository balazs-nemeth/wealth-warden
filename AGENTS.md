# AGENTS

This file provides guidance to AI coding agents like Claude Code (claude.ai/code), Cursor AI, Codex, Gemini CLI, GitHub Copilot, and other AI coding assistants when working with code in this repository.

## Project Overview

**wealth-warden** is an AI-developed companion to manage investment decisions and portfolios. This is a React 18 + TypeScript frontend application currently in initial setup phase.

## Current State

The project is in **early initialization**. Only configuration files exist:

- TypeScript configuration ([ui/tsconfig.json](ui/tsconfig.json))
- ESLint TypeScript config ([.github/agents/tsconfig.eslint.json](.github/agents/tsconfig.eslint.json))
- App metadata ([.github/agents/app.config.json](.github/agents/app.config.json))

No package.json, source code, or build system has been set up yet.

## Planned Architecture

```
ui/
├── main.tsx              # App entry point (not yet created)
├── app/
│   ├── App.tsx           # Main layout with routing (not yet created)
│   ├── components/       # Reusable UI components
│   ├── hooks/            # Custom React hooks
│   ├── pages/            # Route page components
│   ├── types/            # TypeScript type definitions
│   └── utils/            # Utility functions
└── assets/               # Static assets
```

## Configuration Files

- [.github/agents/app.config.json](.github/agents/app.config.json) - App metadata (name, version, description)
- [.github/agents/tsconfig.eslint.json](.github/agents/tsconfig.eslint.json) - TypeScript config for ESLint
- [ui/tsconfig.json](ui/tsconfig.json) - TypeScript config for UI code

## Development Setup (To Be Completed)

This project needs the following to be initialized:

1. **package.json** - Define dependencies (React 18, TypeScript, Vite/Webpack, testing framework)
2. **Build system** - Set up bundler (Vite recommended for React + TypeScript)
3. **Source files** - Create initial UI components and app structure
4. **Testing** - Set up testing framework (Vitest/Jest + React Testing Library)
5. **Linting** - Configure ESLint and Prettier

## Quality Standards

Once the project is initialized, the following standards apply:

### Logging Standards

#### Prefix Pattern

All logs MUST use a consistent prefix: `[ComponentName]` (e.g., `[BlogFeed]`)

#### Required Logging Elements

1. **Function Entry**: Log timestamp and separator at start

   ```typescript
   console.log(
     "[InvestmentStoryFeed] ========================================"
   );
   console.log(
     "[InvestmentStoryFeed] Function called at",
     new Date().toISOString()
   );
   console.log(
     "[InvestmentStoryFeed] ========================================"
   );
   ```

2. **Numbered Steps**: Log each major operation step

   ```typescript
   console.log("[InvestmentStoryFeed] Step 1: Validating input...");
   console.log("[InvestmentStoryFeed] ✓ Input validated");
   ```

3. **Timing Metrics**: Always log duration for performance analysis

   ```typescript
   const startTime = Date.now();
   // ... operation ...
   const duration = Date.now() - startTime;
   console.log("[InvestmentStoryFeed] Operation completed in", duration, "ms");
   ```

4. **Error Details**: Log comprehensive error information

   ```typescript
   console.error("[InvestmentStoryFeed] Error type:", error.constructor.name);
   console.error("[InvestmentStoryFeed] Error message:", error.message);
   console.error("[InvestmentStoryFeed] Error stack:", error.stack);
   console.error(
     "[InvestmentStoryFeed] Duration before error:",
     duration,
     "ms"
   );
   ```

5. **Success Summary**: Log completion with timing breakdown
   ```typescript
   console.log("[InvestmentStoryFeed] SUCCESS: Operation completed");
   console.log("[InvestmentStoryFeed] Total duration:", duration, "ms");
   ```

#### Security: Never Log

- API keys, tokens, passwords
- PII (Personal Identifiable Information)
- Full URLs with embedded credentials

### Test Coverage Requirements

| Code Type                | Minimum Coverage |
| ------------------------ | ---------------- |
| UI components            | 80%              |
| Utility/helper functions | 90%              |

### QA Validation Checklist

Before marking a story as **Done**, ensure:

1. **Tests pass**: All test suites execute without failures
2. **Build succeeds**: `npm run build` completes without errors
3. **Lint passes**: `npm run lint` passes without errors
4. **Coverage met**: Test coverage meets or exceeds targets above
5. **All ACs tested**: Each Acceptance Criteria has corresponding test coverage
6. **Edge cases covered**: Error handling, boundary conditions, and failure scenarios are tested

### Test File Locations

| Test Type               | Location                    |
| ----------------------- | --------------------------- |
| UI component/hook tests | `ui/app/**/*.test.{ts,tsx}` |

## Agent Tools

### PROJECT_MAP.txt

The `PROJECT_MAP.txt` file is a grep-friendly index of the codebase generated by `agent-tools/architecture-overview.py`. It uses a pipe-delimited format for easy parsing.

#### Format Reference

```
TYPE|field1|field2|field3|field4
```

| Record Type | Format                                    | Description                                          |
| ----------- | ----------------------------------------- | ---------------------------------------------------- |
| `FILE`      | `FILE\|path\|size_bytes\|has_tests`       | File entry with size and test coverage flag          |
| `IMPORT`    | `IMPORT\|file\|import_path`               | Import statement in a file                           |
| `EXPORT`    | `EXPORT\|file\|export_name`               | Exported symbol from a file                          |
| `TYPE`      | `TYPE\|file\|name\|kind\|is_exported`     | Type/interface definition (kind: `interface`/`type`) |
| `CLASS`     | `CLASS\|file\|name\|is_exported`          | Class definition                                     |
| `METHOD`    | `METHOD\|file\|class\|name\|is_async`     | Method within a class                                |
| `FUNC`      | `FUNC\|file\|name\|is_async\|is_exported` | Function definition                                  |

#### Common Grep Patterns

```bash
# Find all files in a directory
grep "^FILE|api/" PROJECT_MAP.txt

# Find all exported symbols
grep "^EXPORT|" PROJECT_MAP.txt

# Find all interfaces
grep "^TYPE|.*|interface|" PROJECT_MAP.txt

# Find all async functions
grep "^FUNC|.*|1|" PROJECT_MAP.txt

# Find files with test coverage
grep "^FILE|.*|true$" PROJECT_MAP.txt

# Find files WITHOUT test coverage (excluding test files)
grep "^FILE|" PROJECT_MAP.txt | grep -v "\.test\." | grep "|false$"

# Find all imports of a specific module
grep "^IMPORT|.*|.*blog" PROJECT_MAP.txt

# Find where a specific function is defined
grep "^FUNC|.*|useBlogFeed|" PROJECT_MAP.txt

# Find all exports from a specific file
grep "^EXPORT|ui/app/hooks/useBlogFeed.ts|" PROJECT_MAP.txt

# List all page components
grep "^FILE|ui/app/pages/.*\.tsx|" PROJECT_MAP.txt | grep -v "\.test\."

# Find all hooks
grep "^FILE|ui/app/hooks/.*\.ts|" PROJECT_MAP.txt | grep -v "\.test\."
```

#### Regenerating the Map

```bash
python agent-tools/architecture-overview.py > PROJECT_MAP.txt
```
